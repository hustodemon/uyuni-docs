[[ansible-integration]]
= Ansible integration

[NOTE]
====
This feature is a techhnological preview.
====

todo
- description
- control node
- inventory
 - introspection in real time
- playbook
- scheduling
- notes
  - Now "ansible" package (not supported in SLE) is shipped in SLE15 Client Tools channels. Version 2.9.20
  - non SUSE: use other 3rd party pkgs

- todo
  - proper review of ADOC elements (not sure if syntax ok)


[[at.ansible.overview]]
== Feature Overview

{productname} enables system administrators to operate their Ansible Control Nodes. Supported features are:
* introspection inventory files
* discovery of playbooks
* execution of playbooks


[[at.ansible.requirements]]
== Requirements

To use Ansible features, you need to register your Ansible Control Node system as a Salt client in your {productname}. Moreover, you must enable the ``Ansible Control Node`` system type in the [guimenu]``Add-on System Types`` in the menu:System Details[Properties] page of that system.

Enabling this system type ensures that the ``ansible`` package is installed on the system by adding it in the highstate and enables the Ansible features under the menu::System[Ansible] page.

As the next step, configure the paths to your Ansible inventories and playbooks in the menu::System[Ansible][Control Node]. As an invertory path, you can use the typical ansible inventory path [literal]``/etc/ansible/hosts``. As a playbook directory, you can use any directyr on the control node, where your playbooks reside (typically directories containing the [literal]``site.yml`` files).


[[at.ansible.inventory-introspection]]
== Inventory introspection
After defining an inventory path, you can use {productname} to introspect its contents. You can do so in the menu::System[Ansible][Inventories] page. Clicking an inventory path in this page executes the inventory introspection in real-time on the Control Node.


[[at.ansible.playbook-discovery]]
== Playbook discovery
After defining a playbook directory, you can discover playbooks residing in it via the menu::System[Ansible][Playbooks] page.

As with the inventory introspection, the playbook discovery operations runs in real-time on the Control Node.


[[at.ansible.playbook-execution]]
== Playbook execution
[NOTE]
====
TODO PABLO || CAN: do you need to select an inventory, or is the default used if you don't select anything
====
You can schedule a playbook execution from the menu::System[Ansible][Playbooks] page. After selecting a playbook you wish to execute, you must select the inventory file for the execution from the dropdown element. The dropdown element is populated with the inventories you defined in your Inventory Paths and with inventories that have been locally discovered in your playbook directories (displayed as "Custom Inventory" items in the playbook details).

Afterwards, you choose the time of the playbook execution or select an action chain. Eventually, the {productname} executes the playbook as an action on the Control Node. You can see the result of the operation in the action details page.


